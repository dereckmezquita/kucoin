% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/KucoinDeposit.R
\name{KucoinDeposit}
\alias{KucoinDeposit}
\title{KucoinDeposit Class for KuCoin Deposit Endpoints}
\value{
Not applicable (class definition; see individual methods for return values).
}
\description{
The \code{KucoinDeposit} class provides an asynchronous interface for managing deposits on KuCoin.
It leverages the \code{coro} package for non-blocking HTTP requests, returning promises that typically resolve to \code{data.table}
objects. This class supports creating new deposit addresses, retrieving existing deposit addresses, and fetching deposit history.
}
\details{
\subsection{Workflow Overview}{

Not applicable (class definition overview).
}

\subsection{API Endpoint}{

Not applicable (class-level documentation; see individual methods).
}

\subsection{Usage}{

Utilised by users to manage KuCoin deposits programmatically. The class is initialised with API credentials,
automatically loaded via \code{get_api_keys()} if not provided, and a base URL from \code{get_base_url()}. For detailed endpoint
information and response schemas, refer to the official \href{https://www.kucoin.com/docs-new}{KuCoin API Documentation}.
}

\subsection{Official Documentation}{

\href{https://www.kucoin.com/docs-new}{KuCoin API Documentation}
}
}
\section{Methods}{

\itemize{
\item \strong{initialize(keys, base_url):} Initialises the object with API credentials and the base URL.
\item \strong{add_deposit_address(currency, chain, to, amount):} Creates a new deposit address for a specified currency.
\item \strong{get_deposit_addresses(currency, amount, chain):} Retrieves all deposit addresses for a specified currency.
\item \strong{get_deposit_history(currency, status, startAt, endAt, page_size, max_pages):} Retrieves the deposit history for a specified currency.
}
}

\examples{
\dontrun{
# Comprehensive example demonstrating all methods
main_async <- coro::async(function() {
  # Initialise the class
  deposit <- KucoinDeposit$new()

  # Add a new deposit address
  new_address <- await(deposit$add_deposit_address(
    currency = "USDT",
    chain = "trx",
    to = "trade"
  ))
  print("New Deposit Address:")
  print(new_address)

  # Get all deposit addresses for a currency
  addresses <- await(deposit$get_deposit_addresses(currency = "USDT"))
  print("Deposit Addresses:")
  print(addresses)

  # Get deposit history
  history <- await(deposit$get_deposit_history(
    currency = "USDT",
    status = "SUCCESS",
    startAt = 1728663338000,
    endAt = 1728692138000,
    page_size = 50,
    max_pages = 2
  ))
  print("Deposit History:")
  print(history)
})
main_async()
while (!later::loop_empty()) later::run_now()
}

}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{keys}}{List containing KuCoin API keys (\code{api_key}, \code{api_secret}, \code{api_passphrase}, \code{key_version}).}

\item{\code{base_url}}{Character string representing the base URL for KuCoin API endpoints.
Initialise a New KucoinDeposit Object
\subsection{Description}{

Initialises a \code{KucoinDeposit} object with API credentials and a base URL for managing KuCoin deposits asynchronously.
If not provided, credentials are sourced from \code{get_api_keys()} and the base URL from \code{get_base_url()}.
}

\subsection{Workflow Overview}{
\enumerate{
\item \strong{Credential Assignment}: Sets \code{self$keys} to the provided or default API keys.
\item \strong{URL Assignment}: Sets \code{self$base_url} to the provided or default base URL.
}
}

\subsection{API Endpoint}{

Not applicable (initialisation method).
}

\subsection{Usage}{

Utilised to create an instance of the class with authentication details for deposit management.
}

\subsection{Official Documentation}{

\href{https://www.kucoin.com/docs-new/rest/introduction}{KuCoin API Authentication}
}}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-KucoinDeposit-new}{\code{KucoinDeposit$new()}}
\item \href{#method-KucoinDeposit-add_deposit_address}{\code{KucoinDeposit$add_deposit_address()}}
\item \href{#method-KucoinDeposit-get_deposit_addresses}{\code{KucoinDeposit$get_deposit_addresses()}}
\item \href{#method-KucoinDeposit-get_deposit_history}{\code{KucoinDeposit$get_deposit_history()}}
\item \href{#method-KucoinDeposit-clone}{\code{KucoinDeposit$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-KucoinDeposit-new"></a>}}
\if{latex}{\out{\hypertarget{method-KucoinDeposit-new}{}}}
\subsection{Method \code{new()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{KucoinDeposit$new(keys = get_api_keys(), base_url = get_base_url())}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{keys}}{List containing API configuration parameters from \code{get_api_keys()}, including:
\itemize{
\item \code{api_key}: Character string; your KuCoin API key.
\item \code{api_secret}: Character string; your KuCoin API secret.
\item \code{api_passphrase}: Character string; your KuCoin API passphrase.
\item \code{key_version}: Character string; API key version (e.g., \code{"2"}).
Defaults to \code{get_api_keys()}.
}}

\item{\code{base_url}}{Character string representing the base URL for the API. Defaults to \code{get_base_url()}.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A new instance of the \code{KucoinDeposit} class.
Add Deposit Address
\subsection{Description}{

Creates a new deposit address for a specified currency on KuCoin asynchronously by sending a POST request to the \verb{/api/v3/deposit-address/create} endpoint.
This method constructs a JSON request body, generates authentication headers, and processes the response into a \code{data.table}.
It calls \code{add_deposit_address_v3_impl}.
}

\subsection{Workflow Overview}{
\enumerate{
\item \strong{URL Construction}: Combines the base URL with \verb{/api/v3/deposit-address/create}.
\item \strong{Request Body Preparation}: Builds a list with \code{currency}, \code{chain}, \code{to}, and optional \code{amount}, converted to JSON.
\item \strong{Header Preparation}: Generates authentication headers asynchronously using \code{build_headers()}.
\item \strong{API Request}: Sends a POST request with a 3-second timeout via \code{httr::POST()}.
\item \strong{Response Processing}: Validates the response and converts the \code{"data"} field into a \code{data.table}.
}
}

\subsection{API Endpoint}{

\verb{POST https://api.kucoin.com/api/v3/deposit-address/create}
}

\subsection{Usage}{

Utilised by users to create deposit addresses for various currencies, enabling deposits to the specified account type.
}

\subsection{Official Documentation}{

\href{https://www.kucoin.com/docs-new/rest/account-info/deposit/add-deposit-address-v3}{KuCoin Add Deposit Address (V3)}
}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-KucoinDeposit-add_deposit_address"></a>}}
\if{latex}{\out{\hypertarget{method-KucoinDeposit-add_deposit_address}{}}}
\subsection{Method \code{add_deposit_address()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{KucoinDeposit$add_deposit_address(
  currency,
  chain = NULL,
  to = NULL,
  amount = NULL
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{currency}}{Character string; the currency for which to create the deposit address (e.g., "BTC", "ETH", "USDT").}

\item{\code{chain}}{Character string (optional); the chain identifier (e.g., "eth", "bech32", "btc").}

\item{\code{to}}{Character string (optional); the account type to deposit to ("main" or "trade").}

\item{\code{amount}}{Character string (optional); the deposit amount, only used for Lightning Network invoices.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Promise resolving to a \code{data.table} containing:
\itemize{
\item \code{address} (character): The deposit address.
\item \code{memo} (character): Address remark (may be empty).
\item \code{chainId} (character): The chain identifier.
\item \code{to} (character): The account type.
\item \code{expirationDate} (integer): Expiration time (for Lightning Network).
\item \code{currency} (character): The currency.
\item \code{chainName} (character): The chain name.
Get Deposit Addresses
}
\subsection{Description}{

Retrieves all deposit addresses for a specified currency on KuCoin asynchronously by sending a GET request to the \verb{/api/v3/deposit-addresses} endpoint.
This method constructs the query string, generates authentication headers, and processes the response into a \code{data.table}.
It calls \code{get_deposit_addresses_v3_impl}.
}

\subsection{Workflow Overview}{
\enumerate{
\item \strong{URL Construction}: Combines the base URL with \verb{/api/v3/deposit-addresses} and appends query parameters.
\item \strong{Header Preparation}: Generates authentication headers asynchronously using \code{build_headers()}.
\item \strong{API Request}: Sends a GET request with a 3-second timeout via \code{httr::GET()}.
\item \strong{Response Processing}: Validates the response and converts the \code{"data"} array into a \code{data.table}.
}
}

\subsection{API Endpoint}{

\verb{GET https://api.kucoin.com/api/v3/deposit-addresses}
}

\subsection{Usage}{

Utilised by users to retrieve all existing deposit addresses for a given currency.
}

\subsection{Official Documentation}{

\href{https://www.kucoin.com/docs-new/rest/account-info/deposit/get-deposit-address-v3}{KuCoin Get Deposit Address (V3)}
}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-KucoinDeposit-get_deposit_addresses"></a>}}
\if{latex}{\out{\hypertarget{method-KucoinDeposit-get_deposit_addresses}{}}}
\subsection{Method \code{get_deposit_addresses()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{KucoinDeposit$get_deposit_addresses(currency, amount = NULL, chain = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{currency}}{Character string; the currency for which to retrieve deposit addresses (e.g., "BTC", "ETH", "USDT").}

\item{\code{amount}}{Character string (optional); the deposit amount, only used for Lightning Network invoices.}

\item{\code{chain}}{Character string (optional); the chain identifier (e.g., "eth", "bech32", "btc").}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Promise resolving to a \code{data.table} containing:
\itemize{
\item \code{address} (character): The deposit address.
\item \code{memo} (character): Address remark (may be empty).
\item \code{chainId} (character): The chain identifier.
\item \code{to} (character): The account type ("main" or "trade").
\item \code{expirationDate} (integer): Expiration time (for Lightning Network).
\item \code{currency} (character): The currency.
\item \code{contractAddress} (character): The token contract address.
\item \code{chainName} (character): The chain name.
Get Deposit History
}
\subsection{Description}{

Retrieves a paginated list of deposit history entries for a specified currency on KuCoin asynchronously by sending a GET request to the \verb{/api/v1/deposits} endpoint.
This method handles pagination, constructs the query string, generates authentication headers, and processes the response into a \code{data.table} with a \code{createdAtDatetime} column.
It calls \code{get_deposit_history_impl}.
}

\subsection{Workflow Overview}{
\enumerate{
\item \strong{URL Construction}: Combines the base URL with \verb{/api/v1/deposits} and appends query parameters for filters and pagination.
\item \strong{Pagination Initialisation}: Sets an initial query with \code{currentPage = 1} and the specified \code{page_size}.
\item \strong{Page Fetching}: Defines an async helper to fetch each page with authentication headers.
\item \strong{Automatic Pagination}: Uses \code{auto_paginate} to fetch all pages up to \code{max_pages}.
\item \strong{Response Processing}: Combines \code{"items"} from each page into a \code{data.table}, adding \code{createdAtDatetime}.
}
}

\subsection{API Endpoint}{

\verb{GET https://api.kucoin.com/api/v1/deposits}
}

\subsection{Usage}{

Utilised by users to fetch a comprehensive history of deposits for a KuCoin account, with optional filters for status and time range.
}

\subsection{Official Documentation}{

\href{https://www.kucoin.com/docs-new/rest/account-info/deposit/get-deposit-history}{KuCoin Get Deposit History}
}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-KucoinDeposit-get_deposit_history"></a>}}
\if{latex}{\out{\hypertarget{method-KucoinDeposit-get_deposit_history}{}}}
\subsection{Method \code{get_deposit_history()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{KucoinDeposit$get_deposit_history(
  currency,
  status = NULL,
  startAt = NULL,
  endAt = NULL,
  page_size = 50,
  max_pages = Inf
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{currency}}{Character string; the currency to filter deposits by (e.g., "BTC", "ETH", "USDT").}

\item{\code{status}}{Character string (optional); the status to filter by ("PROCESSING", "SUCCESS", "FAILURE").}

\item{\code{startAt}}{Integer (optional); start time in milliseconds to filter deposits (e.g., 1728663338000).}

\item{\code{endAt}}{Integer (optional); end time in milliseconds to filter deposits (e.g., 1728692138000).}

\item{\code{page_size}}{Integer; number of results per page (10–500, default 50).}

\item{\code{max_pages}}{Numeric; maximum number of pages to fetch (default \code{Inf} for all pages).}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Promise resolving to a \code{data.table} containing:
\itemize{
\item \code{currency} (character): The currency of the deposit.
\item \code{chain} (character): The chain identifier.
\item \code{status} (character): Deposit status.
\item \code{address} (character): Deposit address.
\item \code{memo} (character): Address remark.
\item \code{isInner} (logical): Whether the deposit is internal.
\item \code{amount} (character): Deposit amount.
\item \code{fee} (character): Fee charged.
\item \code{walletTxId} (character or NULL): Wallet transaction ID.
\item \code{createdAt} (integer): Creation timestamp in milliseconds.
\item \code{createdAtDatetime} (POSIXct): Converted creation datetime.
\item \code{updatedAt} (integer): Last updated timestamp in milliseconds.
\item \code{remark} (character): Additional remarks.
\item \code{arrears} (logical): Whether the deposit is in arrears.
}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-KucoinDeposit-clone"></a>}}
\if{latex}{\out{\hypertarget{method-KucoinDeposit-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{KucoinDeposit$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
