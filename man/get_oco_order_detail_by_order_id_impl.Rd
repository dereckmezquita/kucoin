% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/impl_spottrading_orders_oco.R
\name{get_oco_order_detail_by_order_id_impl}
\alias{get_oco_order_detail_by_order_id_impl}
\title{Get OCO Order Detail By OrderId (Implementation)}
\usage{
get_oco_order_detail_by_order_id_impl(
  keys = get_api_keys(),
  base_url = get_base_url(),
  orderId,
  .__coro_env_parent__ = <environment>
)
}
\arguments{
\item{keys}{List; API configuration parameters from \code{get_api_keys()}. Defaults to \code{get_api_keys()}.}

\item{base_url}{Character string; base URL for the KuCoin API. Defaults to \code{get_base_url()}.}

\item{orderId}{Character string; the unique order ID to retrieve (e.g., "674c3b6e688dea0007c7bab2"). Required.}
}
\value{
Promise resolving to a \code{data.table} with one row containing:
\itemize{
\item \code{orderId} (character): Unique order ID generated by the KuCoin system.
\item \code{symbol} (character): Trading pair symbol (e.g., "BTC-USDT").
\item \code{clientOid} (character): Client-assigned order ID.
\item \code{orderTime} (integer): Order placement time in milliseconds.
\item \code{status} (character): Order status ("NEW", "DONE", "TRIGGERED", "CANCELED").
\item \code{orders} (list): List of nested objects, each containing:
\itemize{
\item \code{id} (character): Individual order ID.
\item \code{symbol} (character): Trading pair symbol.
\item \code{side} (character): Order side ("buy" or "sell").
\item \code{price} (character): Order price.
\item \code{stopPrice} (character): Trigger price.
\item \code{size} (character): Order quantity.
\item \code{status} (character): Order status ("NEW", etc.).
}
}
}
\description{
Retrieves detailed information about an OCO order, including its associated limit and stop-limit orders, using its system-generated order ID (\code{orderId}) from the KuCoin Spot trading system asynchronously by sending a GET request to the \verb{/api/v3/oco/order/details/\{orderId\}} endpoint.
}
\details{
\subsection{What is an OCO Order?}{

An OCO order links a limit order (e.g., profit target) with a stop-limit order (e.g., loss limit), canceling one when the other executes. Fetching detailed info is useful for:
\itemize{
\item \strong{Execution Analysis}: Review the specific prices and sizes of both orders to evaluate strategy effectiveness.
\item \strong{Debugging}: Confirm the stop and limit prices align with your intended trade plan (e.g., catching setup errors).
\item \strong{Performance Tracking}: Assess whether triggers are nearing execution in volatile conditions.
For example, detailed info on an OCO order at $50,000 for BTC might show a limit at $55,000 and a stop at $48,000, helping you adjust if the range is too wide.
}
}

\subsection{Description}{

This function fetches detailed OCO order information (\code{orderId}, \code{symbol}, \code{clientOid}, \code{orderTime}, \code{status}, and \code{orders} array) and returns it in a \code{data.table} with nested order details as a list column.
}

\subsection{Workflow}{
\enumerate{
\item \strong{Parameter Validation}: Ensures \code{orderId} is a non-empty string.
\item \strong{Request Construction}: Constructs the endpoint URL by embedding \code{orderId} as a path parameter.
\item \strong{Authentication}: Generates private API headers using \code{build_headers()} with the GET method and endpoint.
\item \strong{API Request}: Sends a GET request to the KuCoin API with a 3-second timeout via \code{httr::GET}.
\item \strong{Response Processing}: Parses the response, confirms success ("200000"), and constructs a \code{data.table} with \code{orders} as a list column.
}
}

\subsection{API Details}{
\itemize{
\item \strong{Endpoint}: \verb{GET https://api.kucoin.com/api/v3/oco/order/details/\{orderId\}}
\item \strong{Domain}: Spot
\item \strong{API Channel}: Private
\item \strong{API Permission}: General
\item \strong{Rate Limit Pool}: Spot
\item \strong{Rate Limit Weight}: 2
\item \strong{SDK Service}: Spot
\item \strong{SDK Sub-Service}: Order
\item \strong{SDK Method Name}: getOcoOrderDetailByOrderId
\item \strong{Official Documentation}: \href{https://www.kucoin.com/docs-new/rest/spot-trading/orders/get-oco-order-detail-by-orderld}{KuCoin Get OCO Order Detail By OrderId}
}
}

\subsection{Request}{
\subsection{Path Parameters}{
\itemize{
\item \code{orderId}: String (required) - The unique order ID generated by the trading system (e.g., "674c3b6e688dea0007c7bab2").
}
}

\subsection{Example Request}{

\if{html}{\out{<div class="sourceCode bash">}}\preformatted{curl --location --request GET 'https://api.kucoin.com/api/v3/oco/order/details/674c3b6e688dea0007c7bab2'
}\if{html}{\out{</div>}}
}

}

\subsection{Response}{
\subsection{HTTP Code: 200}{
\itemize{
\item \strong{Content Type}: \code{application/json}
}
}

\subsection{Data Schema}{
\itemize{
\item \code{code}: String (required) - Response code ("200000" indicates success).
\item \code{data}: Object (required) - Contains:
\itemize{
\item \code{orderId}: String (required) - System-generated order ID.
\item \code{symbol}: String (required) - Trading pair symbol.
\item \code{clientOid}: String (required) - Client-assigned order ID.
\item \code{orderTime}: Integer\if{html}{\out{<int64>}} (required) - Order placement time in milliseconds.
\item \code{status}: String (required) - Order status: "NEW", "DONE", "TRIGGERED", "CANCELED".
\item \code{orders}: Array\link{Object} (required) - List of associated orders (limit and stop-limit), each with:
\itemize{
\item \code{id}: String - Individual order ID.
\item \code{symbol}: String - Trading pair symbol.
\item \code{side}: String - Order side ("buy" or "sell").
\item \code{price}: String - Order price.
\item \code{stopPrice}: String - Trigger price.
\item \code{size}: String - Order quantity.
\item \code{status}: String - Order status.
}
}
}
}

\subsection{JSON Response Example}{

\if{html}{\out{<div class="sourceCode json">}}\preformatted{\{
  "code": "200000",
  "data": \{
    "orderId": "674c3b6e688dea0007c7bab2",
    "symbol": "BTC-USDT",
    "clientOid": "5c52e1203aa6f37f1e493fb",
    "orderTime": 1733049198863,
    "status": "NEW",
    "orders": [
      \{
        "id": "vs93gpqc7dn6h3fa003sfelj",
        "symbol": "BTC-USDT",
        "side": "buy",
        "price": "94000.00000000000000000000",
        "stopPrice": "94000.00000000000000000000",
        "size": "0.10000000000000000000",
        "status": "NEW"
      \},
      \{
        "id": "vs93gpqc7dn6h3fa003sfelk",
        "symbol": "BTC-USDT",
        "side": "buy",
        "price": "96000.00000000000000000000",
        "stopPrice": "98000.00000000000000000000",
        "size": "0.10000000000000000000",
        "status": "NEW"
      \}
    ]
  \}
\}
}\if{html}{\out{</div>}}
}

}
}
\examples{
\dontrun{
library(coro)
library(data.table)

main_async <- coro::async(function() {
  # Retrieve detailed OCO order by orderId
  oco_detail <- await(get_oco_order_detail_by_order_id_impl(
    orderId = "674c3b6e688dea0007c7bab2"
  ))
  print(oco_detail)
})

# Run the async function
main_async()
while (!later::loop_empty()) later::run_now()
}
}
