---
title: "Function Index"
author: "Dereck Mezquita"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to Kucoin}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

<!-- -->

# KuCoin API Functions Documentation

This document outlines the functions available in `kucoin` including a description, arguments and types as well as return object and types.

This is meant to give a high-level overview of the functions available in the package and give you an idea of usage.

---

## Module: `./R/impl_account_account_and_funding.R`

### Function: `get_account_summary_info_impl`

**Description**: Retrieves account summary information from the KuCoin API.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).

**Returns**: A promise resolving to a `data.table` with columns:
- `level` (numeric)
- `subQuantity` (numeric)
- `spotSubQuantity` (numeric)
- `marginSubQuantity` (numeric)
- `futuresSubQuantity` (numeric)
- `optionSubQuantity` (numeric)
- `maxSubQuantity` (numeric)
- `maxDefaultSubQuantity` (numeric)
- `maxSpotSubQuantity` (numeric)
- `maxMarginSubQuantity` (numeric)
- `maxFuturesSubQuantity` (numeric)
- `maxOptionSubQuantity` (numeric)

---

### Function: `get_apikey_info_impl`

**Description**: Fetches detailed API key metadata from the KuCoin API.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).

**Returns**: A promise resolving to a `data.table` with columns:
- `uid` (numeric)
- `subName` (character, optional)
- `remark` (character)
- `apiKey` (character)
- `apiVersion` (numeric)
- `permission` (character)
- `ipWhitelist` (character, optional)
- `isMaster` (logical)
- `createdAt` (numeric)
- `createdAt_datetime` (POSIXct)

---

### Function: `get_spot_account_type_impl`

**Description**: Determines whether the spot account is high-frequency or low-frequency.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).

**Returns**: A promise resolving to a logical value: `TRUE` for high-frequency, `FALSE` for low-frequency.

---

### Function: `get_spot_account_list_impl`

**Description**: Fetches a list of spot accounts from the KuCoin API.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `query`: Named list of query parameters (optional), e.g., `list(currency = "USDT", type = "main")`.

**Returns**: A promise resolving to a `data.table` with columns:
- `id` (character)
- `currency` (character)
- `type` (character)
- `balance` (numeric)
- `available` (numeric)
- `holds` (numeric)

---

### Function: `get_spot_account_detail_impl`

**Description**: Fetches detailed financial metrics for a specific spot account.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `accountId`: Character string, unique account ID. **Required**.

**Returns**: A promise resolving to a `data.table` with columns:
- `currency` (character)
- `balance` (numeric)
- `available` (numeric)
- `holds` (numeric)

---

### Function: `get_cross_margin_account_impl`

**Description**: Fetches cross margin account details.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `query`: Named list of query parameters (optional), e.g., `list(quoteCurrency = "USDT", queryType = "MARGIN")`.

**Returns**: A promise resolving to a `data.table` with columns:
- `totalAssetOfQuoteCurrency` (numeric)
- `totalLiabilityOfQuoteCurrency` (numeric)
- `debtRatio` (numeric)
- `status` (character)
- `currency` (character)
- `total` (numeric)
- `available` (numeric)
- `hold` (numeric)
- `liability` (numeric)
- `maxBorrowSize` (numeric)
- `borrowEnabled` (logical)
- `transferInEnabled` (logical)

---

### Function: `get_isolated_margin_account_impl`

**Description**: Fetches isolated margin account details for specific trading pairs.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `query`: Named list of query parameters (optional), e.g., `list(symbol = "BTC-USDT", quoteCurrency = "USDT", queryType = "ISOLATED")`.

**Returns**: A promise resolving to a `data.table` with columns:
- `totalAssetOfQuoteCurrency` (numeric)
- `totalLiabilityOfQuoteCurrency` (numeric)
- `timestamp` (numeric)
- `timestamp_datetime` (POSIXct)
- `symbol` (character)
- `status` (character)
- `debtRatio` (numeric)
- `base_currency` (character)
- `base_borrowEnabled` (logical)
- `base_transferInEnabled` (logical)
- `base_liability` (numeric)
- `base_total` (numeric)
- `base_available` (numeric)
- `base_hold` (numeric)
- `base_maxBorrowSize` (numeric)
- `quote_currency` (character)
- `quote_borrowEnabled` (logical)
- `quote_transferInEnabled` (logical)
- `quote_liability` (numeric)
- `quote_total` (numeric)
- `quote_available` (numeric)
- `quote_hold` (numeric)
- `quote_maxBorrowSize` (numeric)

---

### Function: `get_spot_ledger_impl`

**Description**: Fetches detailed ledger records for spot and margin accounts.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `query`: Named list of query parameters (optional), e.g., `list(currency = c("BTC", "ETH"), direction = "in", bizType = "TRANSFER", startAt = 1728663338000, endAt = 1728692138000)`.
- `page_size`: Integer, number of results per page (10–500, default: 50).
- `max_pages`: Numeric, maximum number of pages to fetch (default: `Inf`).

**Returns**: A promise resolving to a `data.table` with columns:
- `id` (character)
- `currency` (character)
- `amount` (numeric)
- `fee` (numeric)
- `balance` (numeric)
- `accountType` (character)
- `bizType` (character)
- `direction` (character)
- `createdAt` (numeric)
- `createdAt_datetime` (POSIXct)
- `context` (character)
- `currentPage` (numeric)
- `pageSize` (numeric)
- `totalNum` (numeric)
- `totalPage` (numeric)

---

<!-- -->

## Module: `./R/impl_account_deposit.R`

### Function: `add_deposit_address_v3_impl`

**Description**: Creates a new deposit address for a specified currency on KuCoin by sending a POST request to the `/api/v3/deposit-address/create` endpoint. This internal function is designed for use within an R6 class and is not intended for direct end-user consumption.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `currency`: Character string, the currency for which to create the deposit address (e.g., `"BTC"`, `"ETH"`, `"USDT"`). **Required**.
- `chain`: Character string (optional), the chain identifier for multi-chain currencies (e.g., `"eth"`, `"bech32"`, `"trx"`, `"ton"`).
- `to`: Character string (optional), the account type for the deposit (`"main"` or `"trade"`). Defaults to `"main"`.
- `amount`: Character string (optional), the deposit amount, applicable only for Lightning Network invoices.

**Returns**: A promise resolving to a `data.table` with columns:
- `address` (character): The generated deposit address.
- `memo` (character): Address remark or tag (empty if none).
- `chainId` (character): The chain identifier (e.g., `"ton"`, `"eth"`, `"trx"`).
- `to` (character): The account type (`"main"` or `"trade"`).
- `expirationDate` (numeric): Expiration time for Lightning Network invoices (0 if not applicable).
- `currency` (character): The currency (e.g., `"TON"`, `"BTC"`).
- `chainName` (character): The chain name (e.g., `"TON"`, `"ETH"`).

---

### Function: `get_deposit_addresses_v3_impl`

**Description**: Retrieves all deposit addresses for a specified currency on KuCoin by sending a GET request to the `/api/v3/deposit-addresses` endpoint. This internal function is designed for use within an R6 class and is not intended for direct end-user consumption.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `currency`: Character string, the currency for which to retrieve deposit addresses (e.g., `"BTC"`, `"ETH"`, `"USDT"`). **Required**.
- `amount`: Character string (optional), the deposit amount, only used for Lightning Network invoices.
- `chain`: Character string (optional), the chain identifier to filter addresses (e.g., `"eth"`, `"trx"`, `"ton"`).

**Returns**: A promise resolving to a `data.table` with columns:
- `address` (character): The deposit address.
- `memo` (character): Address remark or tag (empty if none).
- `chainId` (character): The chain identifier (e.g., `"trx"`, `"eth"`, `"ton"`).
- `to` (character): The account type (`"main"` or `"trade"`).
- `expirationDate` (integer): Expiration time for Lightning Network invoices (0 if not applicable).
- `currency` (character): The currency (e.g., `"USDT"`, `"BTC"`).
- `contractAddress` (character): The token contract address (e.g., for ERC20 tokens).
- `chainName` (character): The chain name (e.g., `"TRC20"`, `"ERC20"`, `"TON"`).

---

### Function: `get_deposit_history_impl`

**Description**: Retrieves a paginated list of deposit records for a specified currency from the KuCoin API by sending a GET request to the `/api/v1/deposits` endpoint. This internal function is designed for use within an R6 class and is not intended for direct end-user consumption.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `currency`: Character string, the currency for which to retrieve deposit history (e.g., `"BTC"`, `"ETH"`, `"USDT"`). **Required**.
- `status`: Character string (optional), filter deposits by status (`"PROCESSING"`, `"SUCCESS"`, or `"FAILURE"`).
- `startAt`: POSIXct/POSIXlt datetime object (optional), start time for filtering.
- `endAt`: POSIXct/POSIXlt datetime object (optional), end time for filtering.
- `page_size`: Numeric, number of results per page (10–500, default: 50).
- `max_pages`: Numeric, maximum pages to fetch (default: `Inf`).

**Returns**: A promise resolving to a `data.table` with columns:
- `currency` (character): Currency of the deposit (e.g., `"BTC"`, `"USDT"`).
- `chain` (character): Blockchain network used (e.g., `"ERC20"`, `"TRC20"`, `"TON"`).
- `status` (character): Status of the deposit (`"PROCESSING"`, `"SUCCESS"`, `"FAILURE"`).
- `address` (character): Deposit address.
- `memo` (character): Memo or tag (empty if none).
- `isInner` (logical): Internal transfer flag.
- `amount` (numeric): Deposit amount.
- `fee` (numeric): Deposit fee.
- `walletTxId` (character): Transaction ID on the blockchain.
- `createdAt` (numeric): Creation timestamp in milliseconds.
- `createdAt_Datetime` (POSIXct): Converted creation datetime.
- `updatedAt` (numeric): Last update timestamp in milliseconds.
- `updatedAt_Datetime` (POSIXct): Converted update datetime.
- `remark` (character): Additional remarks.
- `arrears` (logical): Debt indicator.
- `page_currentPage` (integer): Current page number.
- `page_pageSize` (integer): Results per page.
- `page_totalNum` (integer): Total number of records.
- `page_totalPage` (integer): Total number of pages.

---

<!--  -->

## Module: `./R/impl_account_sub_account.R`

### Function: `add_subaccount_impl`

**Description**: Creates a new sub-account on KuCoin by sending a POST request to the `/api/v2/sub/user/created` endpoint.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `password`: Character string, sub-account password (7–24 characters, must contain both letters and numbers, no special characters).
- `subName`: Character string, desired sub-account name (7–32 characters, must include at least one letter and one number, no spaces).
- `access`: Character string, permission type for the sub-account (`"Spot"`, `"Futures"`, or `"Margin"`, default: `"Spot"`).
- `remarks`: Character string (optional), remarks or notes about the sub-account (1–24 characters if provided).

**Returns**: A promise resolving to a `data.table` with columns:
- `uid` (numeric): Unique identifier for the sub-account.
- `subName` (character): Name of the sub-account.
- `remarks` (character): Remarks or notes associated with the sub-account.
- `access` (character): Permission type granted to the sub-account.

---

### Function: `get_subaccount_list_summary_impl`

**Description**: Retrieves a paginated summary of sub-accounts from KuCoin and aggregates the results into a single `data.table`, converting `createdAt` timestamps to human-readable POSIXct datetimes.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `page_size`: Integer, number of results per page (1–100, default: 100).
- `max_pages`: Numeric, maximum number of pages to fetch (default: `Inf`).

**Returns**: A promise resolving to a `data.table` with columns:
- `userId` (character): Unique identifier of the master account.
- `uid` (numeric): Unique identifier of the sub-account.
- `subName` (character): Sub-account name.
- `status` (numeric): Current status of the sub-account (e.g., 2 for enabled).
- `type` (numeric): Type of sub-account (e.g., 0 for normal).
- `access` (character): Permission type granted (e.g., `"All"`, `"Spot"`).
- `createdAt` (numeric): Timestamp of creation in milliseconds.
- `createdAt_datetime` (POSIXct): Converted human-readable datetime.
- `remarks` (character): Remarks or notes associated with the sub-account.
- `tradeTypes` (character): Trade types available, separated by `;`.
- `openedTradeTypes` (character): Currently open trade types, separated by `;`.
- `hostedStatus` (character): Hosted status of the sub-account.

---

### Function: `get_subaccount_detail_balance_impl`

**Description**: Retrieves balance details for a specific sub-account from KuCoin, aggregating account types into a single `data.table`.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `subUserId`: Character string, the sub-account user ID for which balance details are retrieved.
- `includeBaseAmount`: Logical, whether to include currencies with a zero balance (default: `FALSE`).

**Returns**: A promise resolving to a `data.table` with columns:
- `subUserId` (character): Sub-account user ID.
- `subName` (character): Sub-account name.
- `currency` (character): Currency code.
- `balance` (numeric): Total balance.
- `available` (numeric): Amount available for trading or withdrawal.
- `holds` (numeric): Amount locked or held.
- `baseCurrency` (character): Base currency code.
- `baseCurrencyPrice` (numeric): Price of the base currency.
- `baseAmount` (numeric): Amount in the base currency.
- `tag` (character): Tag associated with the account.
- `accountType` (character): Source account type (e.g., `"mainAccounts"`, `"tradeAccounts"`, `"marginAccounts"`, `"tradeHFAccounts"`).

---

### Function: `get_subaccount_spot_v2_impl`

**Description**: Retrieves paginated Spot sub-account information from KuCoin, aggregating balance details into a single `data.table`.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character): KuCoin API key.
  - `api_secret` (character): KuCoin API secret.
  - `api_passphrase` (character): KuCoin API passphrase.
  - `key_version` (character): API key version (e.g., `"2"`).
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `page_size`: Integer, number of results per page (10–100, default: 100).
- `max_pages`: Numeric, maximum number of pages to fetch (default: `Inf`).

**Returns**: A promise resolving to a `data.table` with columns:
- `subUserId` (character): Sub-account user ID.
- `subName` (character): Sub-account name.
- `accountType` (character): Type of account (e.g., `"mainAccounts"`, `"tradeAccounts"`, `"marginAccounts"`, `"tradeHFAccounts"`).
- `currency` (character): Currency code.
- `balance` (numeric): Total balance.
- `available` (numeric): Amount available for trading or withdrawal.
- `holds` (numeric): Amount locked or held.
- `baseCurrency` (character): Base currency code.
- `baseCurrencyPrice` (numeric): Price of the base currency.
- `baseAmount` (numeric): Amount in the base currency.
- `tag` (character): Tag associated with the account.
- `page_currentPage` (numeric): Current page number.
- `page_pageSize` (numeric): Number of results per page.
- `page_totalNum` (numeric): Total number of sub-accounts.
- `page_totalPage` (numeric): Total number of pages.

---

<!--  -->

## Module: `./R/impl_spottrading_market_data_get_klines.R`

### Function: `freq_to_second_map`

**Description**: A named list mapping KuCoin klines frequency strings (e.g., `"1min"`, `"1hour"`) to their equivalent durations in seconds.

**Arguments**: None (static list).

**Returns**: A named list with frequency strings as names and durations in seconds as values (e.g., `list("1min" = 60, "1hour" = 3600, ...)`).

---

### Function: `check_allowed_frequency_str`

**Description**: Validates whether a given frequency string is among the allowed options for KuCoin klines data.

**Arguments**:
- `freq_str`: Character string representing the frequency (e.g., `"1min"`, `"3min"`).

**Returns**: Invisible `NULL` if the frequency is valid; otherwise, aborts with an error listing allowed values: `"1min"`, `"3min"`, `"5min"`, `"15min"`, `"30min"`, `"1hour"`, `"2hour"`, `"4hour"`, `"6hour"`, `"8hour"`, `"12hour"`, `"1day"`, `"1week"`, `"1month"`.

---

### Function: `check_allowed_frequency_s`

**Description**: Validates whether a given frequency duration in seconds corresponds to an allowed KuCoin klines interval.

**Arguments**:
- `freq_s`: Numeric value representing the frequency in seconds.

**Returns**: Invisible `NULL` if the frequency is valid; otherwise, aborts with an error listing allowed values: `60`, `180`, `300`, `900`, `1800`, `3600`, `7200`, `14400`, `21600`, `28800`, `43200`, `86400`, `604800`, `2592000`.

---

### Function: `frequency_to_seconds`

**Description**: Converts a KuCoin klines frequency string into its equivalent duration in seconds.

**Arguments**:
- `freq`: Character string representing the frequency (e.g., `"1min"`, `"1hour"`). Must be one of the allowed values: `"1min"`, `"3min"`, `"5min"`, `"15min"`, `"30min"`, `"1hour"`, `"2hour"`, `"4hour"`, `"6hour"`, `"8hour"`, `"12hour"`, `"1day"`, `"1week"`, `"1month"`.

**Returns**: Numeric value representing the duration in seconds.

---

### Function: `split_time_range_by_candles`

**Description**: Splits a time range into segments based on a maximum number of candles, given a candle duration in seconds, with an overlap to ensure data continuity.

**Arguments**:
- `from`: POSIXct object representing the start time.
- `to`: POSIXct object representing the end time.
- `candle_duration_s`: Numeric value; duration of one candle in seconds.
- `max_candles`: Integer; maximum number of candles per segment (default 1500).
- `overlap`: Numeric; seconds to extend each segment’s end for overlap (default 1).

**Returns**: A `data.table` with columns:
- `from` (POSIXct): Start time of the segment.
- `to` (POSIXct): End time of the segment.

---

### Function: `fetch_klines_segment`

**Description**: Retrieves a segment of candlestick (klines) data for a specified trading pair from the KuCoin API asynchronously, handling up to 1500 candles per request.

**Arguments**:
- `base_url`: Character string; base URL for the KuCoin API (default: `get_base_url()`).
- `symbol`: Character string; trading pair (e.g., `"BTC-USDT"`).
- `freq`: Character string; candlestick interval (e.g., `"15min"`, default: `"15min"`). Must be one of the allowed values: `"1min"`, `"3min"`, `"5min"`, `"15min"`, `"30min"`, `"1hour"`, `"2hour"`, `"4hour"`, `"6hour"`, `"8hour"`, `"12hour"`, `"1day"`, `"1week"`, `"1month"`.
- `from`: POSIXct object; start time of the segment (default: one hour before current time).
- `to`: POSIXct object; end time of the segment (default: current time).
- `retries`: Integer; number of retry attempts for the HTTP request (default 3).
- `delay_ms`: Numeric; delay in milliseconds before sending the request (default 0).

**Returns**: A promise resolving to a `data.table` with columns:
- `datetime` (POSIXct): Converted timestamp.
- `timestamp` (numeric): Raw timestamp in seconds.
- `open` (numeric): Opening price.
- `close` (numeric): Closing price.
- `high` (numeric): Highest price in the interval.
- `low` (numeric): Lowest price in the interval.
- `volume` (numeric): Trading volume.
- `turnover` (numeric): Trading turnover.

---

### Function: `get_klines_impl`

**Description**: Retrieves historical candlestick (klines) data for a single trading pair from the KuCoin API asynchronously, segmenting requests to handle the 1500-candle limit per request.

**Arguments**:
- `base_url`: Character string; base URL for the KuCoin API (default: `get_base_url()`).
- `symbol`: Character string; trading pair (e.g., `"BTC-USDT"`, default: `"BTC-USDT"`).
- `freq`: Character string; candlestick interval (e.g., `"15min"`, default: `"15min"`). Must be one of the allowed values: `"1min"`, `"3min"`, `"5min"`, `"15min"`, `"30min"`, `"1hour"`, `"2hour"`, `"4hour"`, `"6hour"`, `"8hour"`, `"12hour"`, `"1day"`, `"1week"`, `"1month"`.
- `from`: POSIXct object; start time for data retrieval (default: 24 hours before now).
- `to`: POSIXct object; end time for data retrieval (default: now).
- `concurrent`: Logical; whether to fetch segments concurrently (default `TRUE`).
- `delay_ms`: Numeric; delay in milliseconds before each request (default 0).
- `retries`: Integer; number of retry attempts per segment request (default 3).
- `verbose`: Logical; whether to print progress messages (default `FALSE`).

**Returns**: A promise resolving to a `data.table` with columns:
- `datetime` (POSIXct): Converted timestamp.
- `timestamp` (numeric): Raw timestamp in seconds.
- `open` (numeric): Opening price.
- `close` (numeric): Closing price.
- `high` (numeric): Highest price in the interval.
- `low` (numeric): Lowest price in the interval.
- `volume` (numeric): Trading volume.
- `turnover` (numeric): Trading turnover.

---

<!--  -->

## Module: `./R/impl_spottrading_market_data.R`

### Function: `get_announcements_impl`

**Description**: Retrieves the latest announcements from the KuCoin API.

**Arguments**:
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `query`: Named list, additional query parameters for filtering announcements.
- `startAt`: POSIXct/POSIXlt, start time for filtering announcements.
- `endAt`: POSIXct/POSIXlt, end time for filtering announcements.
- `page_size`: Integer, number of results per page.
- `max_pages`: Numeric, maximum number of pages to fetch.

**Returns**: A promise resolving to a `data.table` with columns:
- `annId` (numeric)
- `annTitle` (character)
- `annType` (character)
- `annDesc` (character)
- `cTime` (numeric)
- `cTime_datetime` (POSIXct)
- `language` (character)
- `annUrl` (character)
- `page_currentPage` (numeric)
- `page_pageSize` (numeric)
- `page_totalNum` (numeric)
- `page_totalPage` (numeric)

---

### Function: `get_currency_impl`

**Description**: Retrieves detailed information for a specified currency.

**Arguments**:
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `currency`: Character string, the currency code. **Required**.
- `chain`: Character string (optional), specific blockchain network.

**Returns**: A promise resolving to a `data.table` with columns:
- `currency` (character)
- `name` (character)
- `fullName` (character)
- `precision` (numeric)
- `isMarginEnabled` (logical)
- `isDebitEnabled` (logical)
- `chainName` (character)
- `withdrawalMinSize` (numeric)
- `depositMinSize` (numeric)
- `withdrawFeeRate` (numeric)
- `withdrawalMinFee` (numeric)
- `isWithdrawEnabled` (logical)
- `isDepositEnabled` (logical)
- `confirms` (numeric)
- `preConfirms` (numeric)
- `contractAddress` (character)
- `withdrawPrecision` (numeric)
- `maxWithdraw` (numeric)
- `maxDeposit` (numeric)
- `needTag` (logical)
- `chainId` (character)

---

### Function: `process_currency`

**Description**: Transforms a currency object into a structured `data.table`.

**Arguments**:
- `currency_obj`: List, raw API response data.

**Returns**: A `data.table` with columns matching `get_currency_impl`.

---

### Function: `get_all_currencies_impl`

**Description**: Retrieves all currencies available on KuCoin.

**Arguments**:
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).

**Returns**: A promise resolving to a `data.table` with columns matching `get_currency_impl`.

---

### Function: `get_trade_history_impl`

**Description**: Gets the most recent 100 trade records for a trading symbol.

**Arguments**:
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `symbol`: Character string, trading symbol. **Required**.

**Returns**: A promise resolving to a `data.table` with columns:
- `sequence` (character)
- `price` (numeric)
- `size` (numeric)
- `side` (character)
- `time` (numeric)
- `time_datetime` (POSIXct)

---

### Function: `get_part_orderbook_impl`

**Description**: Retrieves partial orderbook data for a symbol.

**Arguments**:
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `symbol`: Character string, trading symbol. **Required**.
- `size`: Integer, orderbook depth (20 or 100). **Required**.

**Returns**: A promise resolving to a `data.table` with columns:
- `time_datetime` (POSIXct)
- `time` (numeric)
- `sequence` (character)
- `side` (character)
- `price` (numeric)
- `size` (numeric)

---

### Function: `get_full_orderbook_impl`

**Description**: Fetches the complete orderbook for a symbol.

**Arguments**:
- `keys`: List of API configuration parameters (default: `get_api_keys()`):
  - `api_key` (character)
  - `api_secret` (character)
  - `api_passphrase` (character)
  - `key_version` (character)
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `symbol`: Character string, trading symbol. **Required**.

**Returns**: A promise resolving to a `data.table` with columns matching `get_part_orderbook_impl`.

---

### Function: `get_24hr_stats_impl`

**Description**: Retrieves 24-hour market statistics for a symbol.

**Arguments**:
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).
- `symbol`: Character string, trading symbol. **Required**.

**Returns**: A promise resolving to a `data.table` with columns:
- `time_datetime` (POSIXct)
- `time` (numeric)
- `symbol` (character)
- `buy` (character)
- `sell` (character)
- `changeRate` (character)
- `changePrice` (character)
- `high` (character)
- `low` (character)
- `vol` (character)
- `volValue` (character)
- `last` (character)
- `averagePrice` (character)
- `takerFeeRate` (character)
- `makerFeeRate` (character)
- `takerCoefficient` (character)
- `makerCoefficient` (character)

---

### Function: `get_market_list_impl`

**Description**: Lists all available trading markets.

**Arguments**:
- `base_url`: Character string, the base URL for the API (default: `get_base_url()`).

**Returns**: A promise resolving to a character vector of market identifiers.

---