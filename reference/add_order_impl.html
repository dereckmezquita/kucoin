<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add Order (Implementation) — add_order_impl • kucoin</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add Order (Implementation) — add_order_impl"><meta name="description" content="Places a new order (limit or market) to the KuCoin Spot trading system asynchronously.
This function handles both limit and market order types, validates parameters according to KuCoin's specifications,
and returns the order ID and client order ID upon successful placement."><meta property="og:description" content="Places a new order (limit or market) to the KuCoin Spot trading system asynchronously.
This function handles both limit and market order types, validates parameters according to KuCoin's specifications,
and returns the order ID and client order ID upon successful placement."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">kucoin</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><h6 class="dropdown-header" data-toc-skip>Articles</h6></li>
<li class="nav-item"><a class="nav-link" href="../articles/donate.html">Donate</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/dereckmezquita/kucoin" target="_blank"><span class="fa fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.youtube.com/@derecksyoutube" target="_blank"><span class="fa fa-youtube fa-lg"></span></a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://derecksprojects.com" target="_blank">derecksprojects.com</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://derecksnotes.com" target="_blank">derecksnotes.com</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add Order (Implementation)</h1>
      <small class="dont-index">Source: <a href="https://github.com/dereckmezquita/kucoin/blob/master/R/impl_spottrading_orders_add_order.R" class="external-link"><code>R/impl_spottrading_orders_add_order.R</code></a></small>
      <div class="d-none name"><code>add_order_impl.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Places a new order (limit or market) to the KuCoin Spot trading system asynchronously.
This function handles both limit and market order types, validates parameters according to KuCoin's specifications,
and returns the order ID and client order ID upon successful placement.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre><code>add_order_impl(
  keys = get_api_keys(),
  base_url = get_base_url(),
  type,
  symbol,
  side,
  clientOid = NULL,
  price = NULL,
  size = NULL,
  funds = NULL,
  stp = NULL,
  tags = NULL,
  remark = NULL,
  timeInForce = NULL,
  cancelAfter = NULL,
  postOnly = NULL,
  hidden = NULL,
  iceberg = NULL,
  visibleSize = NULL,
  .__coro_env_parent__ = &lt;environment&gt;
)</code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-keys">keys<a class="anchor" aria-label="anchor" href="#arg-keys"></a></dt>
<dd><p>List; API configuration parameters from <code><a href="get_api_keys.html">get_api_keys()</a></code>. Defaults to <code><a href="get_api_keys.html">get_api_keys()</a></code>.</p></dd>


<dt id="arg-base-url">base_url<a class="anchor" aria-label="anchor" href="#arg-base-url"></a></dt>
<dd><p>Character string; base URL for the KuCoin API. Defaults to <code><a href="get_base_url.html">get_base_url()</a></code>.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>Character string; order type: "limit" or "market". Required.</p></dd>


<dt id="arg-symbol">symbol<a class="anchor" aria-label="anchor" href="#arg-symbol"></a></dt>
<dd><p>Character string; trading pair (e.g., "BTC-USDT"). Required.</p></dd>


<dt id="arg-side">side<a class="anchor" aria-label="anchor" href="#arg-side"></a></dt>
<dd><p>Character string; order side: "buy" or "sell". Required.</p></dd>


<dt id="arg-clientoid">clientOid<a class="anchor" aria-label="anchor" href="#arg-clientoid"></a></dt>
<dd><p>Character string; unique client order ID (recommended UUID, max 40 chars). Optional.</p></dd>


<dt id="arg-price">price<a class="anchor" aria-label="anchor" href="#arg-price"></a></dt>
<dd><p>Character string; price for limit orders (must align with priceIncrement). Required for limit orders.</p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p>Character string; quantity for limit or market orders (must align with baseIncrement). Required for limit, optional for market.</p></dd>


<dt id="arg-funds">funds<a class="anchor" aria-label="anchor" href="#arg-funds"></a></dt>
<dd><p>Character string; funds for market orders (must align with quoteIncrement). Optional for market, mutually exclusive with size.</p></dd>


<dt id="arg-stp">stp<a class="anchor" aria-label="anchor" href="#arg-stp"></a></dt>
<dd><p>Character string; self-trade prevention strategy: "CN", "CO", "CB", or "DC". Optional.</p></dd>


<dt id="arg-tags">tags<a class="anchor" aria-label="anchor" href="#arg-tags"></a></dt>
<dd><p>Character string; order tag (max 20 ASCII chars). Optional.</p></dd>


<dt id="arg-remark">remark<a class="anchor" aria-label="anchor" href="#arg-remark"></a></dt>
<dd><p>Character string; order remarks (max 20 ASCII chars). Optional.</p></dd>


<dt id="arg-timeinforce">timeInForce<a class="anchor" aria-label="anchor" href="#arg-timeinforce"></a></dt>
<dd><p>Character string; time-in-force strategy: "GTC", "GTT", "IOC", or "FOK". Optional, defaults to "GTC".</p></dd>


<dt id="arg-cancelafter">cancelAfter<a class="anchor" aria-label="anchor" href="#arg-cancelafter"></a></dt>
<dd><p>Integer; cancel after n seconds (for GTT). Optional.</p></dd>


<dt id="arg-postonly">postOnly<a class="anchor" aria-label="anchor" href="#arg-postonly"></a></dt>
<dd><p>Logical; passive order flag (disabled for IOC/FOK). Optional, defaults to FALSE.</p></dd>


<dt id="arg-hidden">hidden<a class="anchor" aria-label="anchor" href="#arg-hidden"></a></dt>
<dd><p>Logical; hide order from order book. Optional, defaults to FALSE.</p></dd>


<dt id="arg-iceberg">iceberg<a class="anchor" aria-label="anchor" href="#arg-iceberg"></a></dt>
<dd><p>Logical; show only visible portion in iceberg orders. Optional, defaults to FALSE.</p></dd>


<dt id="arg-visiblesize">visibleSize<a class="anchor" aria-label="anchor" href="#arg-visiblesize"></a></dt>
<dd><p>Character string; max visible quantity for iceberg orders. Optional.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Promise resolving to a <code>data.table</code> containing:</p><ul><li><p><code>orderId</code> (character): Unique order ID generated by KuCoin.</p></li>
<li><p><code>clientOid</code> (character): Client-specified order ID.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="workflow-overview">Workflow Overview<a class="anchor" aria-label="anchor" href="#workflow-overview"></a></h3>

<ol><li><p><strong>Parameter Validation</strong>: Validates required and optional parameters based on order type (limit/market) using <code><a href="https://rlang.r-lib.org/reference/arg_match.html" class="external-link">rlang::arg_match0</a></code> for enumerated values.</p></li>
<li><p><strong>Request Body Construction</strong>: Builds a JSON body with mandatory and optional parameters.</p></li>
<li><p><strong>Authentication</strong>: Generates headers with API credentials using <code><a href="build_headers.html">build_headers()</a></code>.</p></li>
<li><p><strong>API Request</strong>: Sends a POST request to the KuCoin API with a 3-second timeout.</p></li>
<li><p><strong>Response Processing</strong>: Parses the response, validates success, and returns order details as a <code>data.table</code>.</p></li>
</ol></div>

<div class="section">
<h3 id="api-endpoint">API Endpoint<a class="anchor" aria-label="anchor" href="#api-endpoint"></a></h3>


<p><code>POST https://api.kucoin.com/api/v1/hf/orders</code></p>
</div>

<div class="section">
<h3 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h3>


<p>Utilised to place spot trading orders on KuCoin. Supports limit orders (price + size) and market orders (size or funds).
Requires sufficient funds in the account and adheres to KuCoin's trading rules (e.g., max 2000 active orders).</p>
</div>

<div class="section">
<h3 id="official-documentation">Official Documentation<a class="anchor" aria-label="anchor" href="#official-documentation"></a></h3>


<p><a href="https://www.kucoin.com/docs-new/rest/spot-trading/orders/add-order" class="external-link">KuCoin Add Order</a></p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">main_async</span> <span class="op">&lt;-</span> <span class="fu">coro</span><span class="fu">::</span><span class="fu"><a href="https://coro.r-lib.org/reference/async.html" class="external-link">async</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># Place a limit buy order</span></span></span>
<span class="r-in"><span>  <span class="va">order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://coro.r-lib.org/reference/async.html" class="external-link">await</a></span><span class="op">(</span><span class="fu">add_order_impl</span><span class="op">(</span></span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="st">"limit"</span>,</span></span>
<span class="r-in"><span>    symbol <span class="op">=</span> <span class="st">"BTC-USDT"</span>,</span></span>
<span class="r-in"><span>    side <span class="op">=</span> <span class="st">"buy"</span>,</span></span>
<span class="r-in"><span>    price <span class="op">=</span> <span class="st">"50000"</span>,</span></span>
<span class="r-in"><span>    size <span class="op">=</span> <span class="st">"0.0001"</span>,</span></span>
<span class="r-in"><span>    clientOid <span class="op">=</span> <span class="fu">uuid</span><span class="fu">::</span><span class="fu">UUIDgenerate</span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    remark <span class="op">=</span> <span class="st">"Test limit order"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">order</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Place a market buy order with funds</span></span></span>
<span class="r-in"><span>  <span class="va">market_order</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://coro.r-lib.org/reference/async.html" class="external-link">await</a></span><span class="op">(</span><span class="fu">add_order_impl</span><span class="op">(</span></span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="st">"market"</span>,</span></span>
<span class="r-in"><span>    symbol <span class="op">=</span> <span class="st">"BTC-USDT"</span>,</span></span>
<span class="r-in"><span>    side <span class="op">=</span> <span class="st">"buy"</span>,</span></span>
<span class="r-in"><span>    funds <span class="op">=</span> <span class="st">"10"</span>,</span></span>
<span class="r-in"><span>    clientOid <span class="op">=</span> <span class="fu">uuid</span><span class="fu">::</span><span class="fu">UUIDgenerate</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">market_order</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">main_async</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">while</span> <span class="op">(</span><span class="op">!</span><span class="fu">later</span><span class="fu">::</span><span class="fu"><a href="https://r-lib.github.io/later/reference/loop_empty.html" class="external-link">loop_empty</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fu">later</span><span class="fu">::</span><span class="fu"><a href="https://r-lib.github.io/later/reference/run_now.html" class="external-link">run_now</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://derecksnotes.com" class="external-link">Dereck Mezquita</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

